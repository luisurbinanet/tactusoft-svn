<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../templates/common.xhtml">

	<ui:define name="body">

		<p:panel style="width:100%;height:700px;"
			header="#{msg['title_patient']}">

			<p:spacer height="5" />

			<h:form id="form">

				<p:growl id="growl" showDetail="true" />

				<p:toolbar style="width:100%">
					<p:toolbarGroup align="left">
						<p:commandButton value="#{msg['btn_new']}" icon="ui-icon-document"
							actionListener="#{patientBacking.newAction}"
							update="pnlDetail pnlDetail2 btnSavePatient" process="@this" />
						<p:commandButton value="#{msg['btn_search']}"
							icon="ui-icon-search" action="#{patientBacking.searchAction}"
							update="growl btnSavePatient pnlDetail pnlDetail2"
							process="@this,txtDoc" />
						<p:commandButton id="btnSavePatient" value="#{msg['btn_save']}"
							icon="ui-icon-disk" action="#{patientBacking.saveAction}"
							update="growl btnSavePatient pnlDetail pnlDetail2"
							disabled="#{patientBacking.disabledSaveButton}" />
					</p:toolbarGroup>
				</p:toolbar>

				<p:spacer height="5" />

				<h:panelGrid id="pnlDetail" columns="4" cellspacing="5" width="100%"
					columnClasses="width20per,width60per,width20per,width60per">

					<h:outputText value="#{msg['pat_country']}" style="width:100%" />
					<p:selectOneMenu value="#{patientBacking.idCountry}"
						style="width:300px" required="true" label="#{msg['pat_country']}">
						<f:selectItems value="#{patientBacking.listCountry}" />
						<p:ajax update="selRegion selCity pnlDetail2"
							listener="#{patientBacking.handleCountryChange}" />
					</p:selectOneMenu>

					<h:outputText value="#{msg['pat_region']}" style="width:100%" />
					<p:selectOneMenu id="selRegion" value="#{patientBacking.idRegion}"
						style="width:300px" required="true" label="#{msg['pat_region']}">
						<f:selectItems value="#{patientBacking.listRegion}" />
						<p:ajax update="selCity"
							listener="#{patientBacking.handleRegionChange}" />
					</p:selectOneMenu>

					<h:outputText value="#{msg['pat_city']}" style="width:100%" />
					<p:selectOneMenu id="selCity" value="#{patientBacking.idCity}"
						style="width:300px" required="true" label="#{msg['pat_city']}">
						<f:selectItems value="#{patientBacking.listCity}" />
					</p:selectOneMenu>

					<h:outputText style="width:100%" />
					<h:outputText style="width:300px" />

				</h:panelGrid>

				<h:panelGrid id="pnlDetail2" columns="4" cellspacing="5"
					columnClasses="width20per,width60per,width20per,width60per"
					width="100%">

					<h:outputLabel id="lblDoc" value="#{msg['pat_code']}"
						rendered="#{not patientBacking.automatic}" />
					<p:inputText id="txtDoc" value="#{patientBacking.selected.doc}"
						style="width:300px;" label="#{msg['pat_code']}" required="true"
						maxlength="10" rendered="#{not patientBacking.automatic}" />

					<h:outputLabel id="lblDocAutomatic"
						value="#{msg['pat_autonumeric']}"
						rendered="#{patientBacking.automatic and patientBacking.disabledSaveButton}" />
					<p:inputText id="txtDocAutomatic"
						value="#{patientBacking.selected.doc}"
						style="width:300px;background-color:#FFFF80;font-weight:bold;"
						label="#{msg['pat_code']}" maxlength="10"
						rendered="#{patientBacking.automatic and patientBacking.disabledSaveButton}" />

					<h:outputLabel value="#{msg['pat_sap_code']}"
						rendered="#{patientBacking.disabledSaveButton}" />
					<p:inputText value="#{patientBacking.selected.codeSap}"
						style="width:300px;background-color:#FFFF80;font-weight:bold;"
						label="#{msg['pat_sap_code']}" readonly="true"
						rendered="#{patientBacking.disabledSaveButton}" />

					<h:outputText
						rendered="#{!patientBacking.automatic and !patientBacking.disabledSaveButton}" />
					<h:outputText
						rendered="#{!patientBacking.automatic and !patientBacking.disabledSaveButton}" />

					<h:outputLabel value="#{msg['pat_names']}" />
					<p:inputText value="#{patientBacking.selected.firstnames}"
						style="width:300px" label="#{msg['pat_names']}" required="true" />

					<h:outputLabel value="#{msg['pat_surnames']}" />
					<p:inputText value="#{patientBacking.selected.surnames}"
						style="width:300px" label="#{msg['pat_surnames']}" required="true" />

					<h:outputText value="#{msg['glb_gender']}" />
					<p:selectOneMenu value="#{patientBacking.selected.gender}"
						style="width:300px" label="#{msg['glb_gender']}" required="true">
						<f:selectItem itemLabel="#{msg['glb_default_value']}" itemValue="" />
						<f:selectItem itemLabel="#{msg['glb_gender_woman']}" itemValue="W" />
						<f:selectItem itemLabel="#{msg['glb_gender_man']}" itemValue="M" />
					</p:selectOneMenu>

					<h:outputText value="#{msg['pat_address']}" />
					<p:inputText value="#{patientBacking.selected.address}"
						maxlength="255" style="width:300px" label="#{msg['pat_address']}"
						required="true" />

					<h:outputText value="#{msg['pat_zip_code']}" />
					<p:inputText value="#{patientBacking.selected.zipCode}"
						style="width:300px" label="#{msg['pat_zip_code']}" maxlength="10" />

					<h:outputText value="#{msg['pat_phone_number']}" />
					<p:inputText value="#{patientBacking.selected.phoneNumber}"
						style="width:300px" label="#{msg['pat_phone_number']}"
						required="true" maxlength="16" />

					<h:outputText value="#{msg['pat_email']}" />
					<p:inputText value="#{patientBacking.selected.email}"
						style="width:300px" label="#{msg['pat_email']}"
						validator="emailValidator" />

					<h:outputText value="#{msg['pat_cell_number']}" />
					<p:inputText value="#{patientBacking.selected.cellNumber}"
						style="width:300px" label="#{msg['pat_cell_number']}"
						required="true" maxlength="16" />

					<h:outputLabel value="#{msg['pat_sales_off']}" style="width:40%" />
					<p:selectOneMenu value="#{patientBacking.salesOff}"
						style="width:300px">
						<f:selectItems value="#{patientBacking.listBranch}" />
					</p:selectOneMenu>

					<h:outputText value="#{msg['pat_cycle']}" />
					<p:selectOneRadio id="optionsCycle" layout="pageDirection"
						value="#{patientBacking.selected.cycle}">
						<f:selectItem itemLabel="#{msg['glb_state_yes']}" itemValue="true" />
						<f:selectItem itemLabel="#{msg['glb_state_no']}" itemValue="false" />
					</p:selectOneRadio>

					<h:outputText value="#{msg['pat_send']}" />
					<p:selectManyCheckbox id="optionsSend" layout="pageDirection"
						value="#{patientBacking.selectedSendOptions}">
						<f:selectItem itemLabel="#{msg['pat_send_phone']}" itemValue="1" />
						<f:selectItem itemLabel="#{msg['pat_send_email']}" itemValue="2" />
						<f:selectItem itemLabel="#{msg['pat_send_postal']}" itemValue="3" />
						<f:selectItem itemLabel="#{msg['pat_send_sms']}" itemValue="4" />
					</p:selectManyCheckbox>

					<h:outputText value="#{msg['pat_type_obs']}" />
					<p:inputTextarea value="#{patientBacking.selected.obs}"
						style="width:300px" rows="4" />
				</h:panelGrid>

			</h:form>

		</p:panel>

	</ui:define>
</ui:composition>
</html>
