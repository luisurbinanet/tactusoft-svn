
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../templates/common.xhtml">

	<ui:define name="body">

		<p:panel style="width:100%;height:600px;"
			header="#{msg['title_attend_appointent']}">

			<p:spacer height="5" />

			<h:form id="form">

				<p:growl id="growl" showDetail="true" />

				<p:spacer height="10" />

				<p:dataGrid id="dataApp" var="row"
					value="#{doctorAppointmentBacking.listAppointmentByDoctor}"
					columns="3" rows="9" paginator="true" rowsPerPageTemplate="9,12,15">

					<p:column>
						<p:panel header="Cita Nro. #{row.code}" style="text-align:center">
							<h:panelGrid columns="1" style="width:100%">
								<h:outputText value="#{row.crmProcedureDetail.name}"
									style="font-size:medium;font-weight:bold;" />
								<h:panelGrid columns="2" style="width:100%">
									<h:outputText value="#{msg['app_start_hour']}"
										style="font-size:medium;text-align:center;" />
									<h:outputText value="#{row.startAppointmentDate}"
										style="font-size:medium;">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
									</h:outputText>
									<h:outputText value="#{msg['app_end_hour']}"
										style="font-size:medium;" />
									<h:outputText value="#{row.endAppointmentDate}"
										style="font-size:medium;">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
									</h:outputText>
									<h:outputText value="#{msg['app_branch']}"
										style="font-size:medium;" />
									<h:outputText value="#{row.crmBranch.name}"
										style="font-size:medium;" />
								</h:panelGrid>

								<h:panelGrid columns="2" style="width:100%">
									<p:commandButton value="#{msg['btn_assisted_appointment']}"
										oncomplete="confirmation2.show()">
										<f:setPropertyActionListener value="#{row}"
											target="#{doctorAppointmentBacking.selectedAppointment}" />
									</p:commandButton>

									<p:commandButton value="#{msg['btn_no_assisted_appointment']}"
										oncomplete="confirmation.show()">
										<f:setPropertyActionListener value="#{row}"
											target="#{doctorAppointmentBacking.selectedAppointment}" />
									</p:commandButton>
								</h:panelGrid>
							</h:panelGrid>
						</p:panel>
					</p:column>

				</p:dataGrid>

				<p:confirmDialog id="confirmDialog" message="#{msg['glb_question']}"
					header="#{msg['title_app']}" severity="alert"
					widgetVar="confirmation">

					<p:commandButton id="confirm" value="#{msg['glb_state_yes']}"
						update=":form:dataApp" oncomplete="confirmation.hide()"
						actionListener="#{doctorAppointmentBacking.cancelAppointmentAction}" />
					<p:commandButton id="decline" value="#{msg['glb_state_no']}"
						onclick="confirmation.hide()" type="button" />

				</p:confirmDialog>

				<p:confirmDialog id="confirmDialog2"
					message="#{msg['glb_question']}" header="#{msg['title_app']}"
					severity="alert" widgetVar="confirmation2">

					<p:commandButton id="confirm2" value="#{msg['glb_state_yes']}"
						oncomplete="confirmation2.hide()"
						action="#{doctorAppointmentBacking.attendedAppointmentAction}" />
					<p:commandButton id="decline2" value="#{msg['glb_state_no']}"
						onclick="confirmation2.hide()" type="button" />

				</p:confirmDialog>

			</h:form>

		</p:panel>

	</ui:define>
</ui:composition>
</html>
