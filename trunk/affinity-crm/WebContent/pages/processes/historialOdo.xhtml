<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<p:tabView style="width:100%;height:100%" dynamic="true"
	id="#{prefix}_tabview"
	rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">

	<p:tab id="tab1" title="#{msg['his_history']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable id="tblHistoryAppointment" var="rec"
			value="#{historyOdontologyBacking.historyAppointmentModel}"
			rowKey="#{rec.code}" style="width:100%" paginator="true" rows="10"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['app_branch']}">
				<h:outputLabel value="#{rec.branchName}" />
			</p:column>

			<p:column headerText="#{msg['app_doctor']}">
				<h:outputLabel value="#{rec.doctorNames}" />
			</p:column>

			<p:column headerText="#{msg['app_procedure']}">
				<h:outputLabel value="#{rec.prcDetName}" />
			</p:column>

			<p:column style="width:4%">
				<p:commandButton icon="ui-icon-print" ajax="false"
					title="#{msg['btn_print_medication']}"
					action="#{historyOdontologyBacking.printFormulaHistorialAction}"
					disabled="#{rec.state ne 4 or rec.closeAppointment eq 0}">
					<f:setPropertyActionListener value="#{rec}"
						target="#{historyOdontologyBacking.selectedAppointmentPrint}" />
				</p:commandButton>
			</p:column>

		</p:dataTable>
	</p:tab>

	<p:tab id="tab2" title="#{msg['his_history_history']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable id="tblHistory" var="rec"
			value="#{historyOdontologyBacking.historyHistoryModel}"
			rowKey="#{rec.code}" style="width:100%" paginator="true" rows="5"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.crmAppointment.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['exp_doctor']}">
				<h:outputLabel value="#{rec.crmAppointment.crmDoctor.names}" />
			</p:column>

			<p:column headerText="#{msg['his_history_reason']}">
				<h:outputLabel value="#{rec.reason}" />
			</p:column>

			<p:column headerText="#{msg['his_history_disease']}">
				<h:outputLabel value="#{rec.disease}" />
			</p:column>

			<p:column style="width:4%" rendered="false">
				<p:commandButton icon="ui-icon-search" title="#{msg['btn_view']}"
					update=":form:dialogHistory" oncomplete="dlgHistory.show();">
					<f:setPropertyActionListener value="#{rec}"
						target="#{historyOdontologyBacking.selectedHistoryHistory}" />
				</p:commandButton>
			</p:column>

		</p:dataTable>
	</p:tab>

	<p:tab id="tab3" title="#{msg['his_history_record']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable id="tblRecord" var="rec"
			value="#{historyOdontologyBacking.historyRecordModel}"
			rowKey="#{rec.code}" style="width:100%" paginator="true" rows="5"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.crmAppointment.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['exp_doctor']}">
				<h:outputLabel value="#{rec.crmAppointment.crmDoctor.names}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_arthritis']}">
				<h:outputLabel value="#{rec.arthritis?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_cancer']}">
				<h:outputLabel value="#{rec.cancer?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_pulmonary']}">
				<h:outputLabel value="#{rec.pulmonary?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_diabetes']}">
				<h:outputLabel value="#{rec.diabetes?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_hypertension']}">
				<h:outputLabel value="#{rec.hypertension?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_hospitalizations']}">
				<h:outputLabel value="#{rec.hospitalizations?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_allergy']}">
				<h:outputLabel value="#{rec.allergy?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_rec_per_infections']}">
				<h:outputLabel value="#{rec.infections?'SI':'NO'}" />
			</p:column>

			<p:column style="width:4%" rendered="false">
				<p:commandButton icon="ui-icon-search" title="#{msg['btn_view']}"
					update=":form:dialogRecord" oncomplete="dlgRecord.show();">
					<f:setPropertyActionListener value="#{rec}"
						target="#{historyOdontologyBacking.selectedHistoryRecord}" />
				</p:commandButton>
			</p:column>

		</p:dataTable>
	</p:tab>

	<p:tab id="tab5" title="#{msg['his_general_findings']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'NURSE_AUX' or historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable id="tblPhysique" var="rec"
			value="#{historyOdontologyBacking.historyPhysiqueModel}"
			rowKey="#{rec.code}" style="width:100%" paginator="true" rows="5"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.crmAppointment.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['exp_doctor']}">
				<h:outputLabel value="#{rec.crmAppointment.crmDoctor.names}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_heart_rate']}">
				<h:outputLabel value="#{rec.heartRate}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_respiratory_rate']}">
				<h:outputLabel value="#{rec.respiratoryRate}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_blood_pressure']}">
				<h:outputLabel value="#{rec.bloodPressure}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_brush_frecuency']}">
				<h:outputLabel value="#{rec.brushFrecuency}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_floss']}">
				<h:outputLabel value="#{rec.floss?'SI':'NO'}" />
			</p:column>

			<p:column headerText="#{msg['his_physique_oral_hygiene_habit']}">
				<h:outputLabel value="#{rec.oralHygieneHabit?'SI':'NO'}" />
			</p:column>

			<p:column style="width:4%" rendered="false">
				<p:commandButton icon="ui-icon-search" title="#{msg['btn_view']}"
					update=":form:dialogPhysique" oncomplete="dlgPhysique.show();">
					<f:setPropertyActionListener value="#{rec}"
						target="#{historyOdontologyBacking.selectedHistoryPhysique}" />
				</p:commandButton>
			</p:column>

		</p:dataTable>
	</p:tab>

	<p:tab id="tab7" title="#{msg['his_history_ip_odo']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable var="rec"
			value="#{historyOdontologyBacking.listDiagnosisView}"
			paginator="true" rows="15" style="width:100%"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.crmAppointment.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['app_doctor']}">
				<h:outputLabel value="#{rec.crmAppointment.crmDoctor.names}" />
			</p:column>

			<p:column headerText="#{msg['cie_desc']}">
				<h:outputLabel value="#{rec.crmCie.description}" />
			</p:column>

		</p:dataTable>

	</p:tab>

	<p:tab id="tab8" title="#{msg['his_history_medicaction']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">
		<p:dataTable var="rec"
			value="#{historyOdontologyBacking.listMedicationView}"
			paginator="true" rows="15" style="width:100%"
			emptyMessage="#{msg['glb_no_records_found']}">

			<p:column headerText="#{msg['app_date']}">
				<h:outputLabel value="#{rec.crmAppointment.startAppointmentDate}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputLabel>
			</p:column>

			<p:column headerText="#{msg['app_doctor']}">
				<h:outputLabel value="#{rec.crmAppointment.crmDoctor.names}" />
			</p:column>

			<p:column headerText="#{msg['sal_material_descr']}">
				<h:outputLabel value="#{rec.descMaterial}" />
			</p:column>

			<p:column headerText="#{msg['sal_material_amount']}"
				style="width:100px">
				<h:outputLabel value="#{rec.unit}" />
			</p:column>

			<p:column headerText="#{msg['cie_grp_diagnosis']}">
				<h:outputLabel value="#{rec.crmCie.description}" />
			</p:column>
		</p:dataTable>
	</p:tab>

	<p:tab id="tab12" title="#{msg['his_history_consent']}"
		rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}">

		<h:panelGrid width="100%">
			<p:commandButton value="#{msg['btn_add']}"
				actionListener="#{historyOdontologyBacking.newConsentAction}"
				oncomplete="dlgConsent.show()" update=":form:dialogConsent"
				rendered="#{historyOdontologyBacking.rolePrincipal eq 'DOCTOR'}" />

			<p:spacer />

			<p:dataTable id="tblConsent" var="rec"
				value="#{historyOdontologyBacking.listConsentView}" paginator="true"
				rows="15" style="width:100%"
				emptyMessage="#{msg['glb_no_records_found']}">

				<p:column headerText="#{msg['con_date_informed']}" width="80%">
					<h:outputLabel value="#{rec.dateInformed}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputLabel>
				</p:column>

				<p:column headerText="#{msg['con_consent']}" width="20%">
					<p:commandButton id="downloadLink" value="#{msg['btn_download']}"
						ajax="false" icon="ui-icon-carat-1-s"
						onclick="PrimeFaces.monitorDownload(start, stop)">
						<p:fileDownload
							value="#{historyOdontologyBacking.getFile(rec.consentFile)}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</h:panelGrid>
	</p:tab>

</p:tabView>

</html>
