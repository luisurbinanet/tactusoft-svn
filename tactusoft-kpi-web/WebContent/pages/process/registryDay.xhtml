<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../layout/main.xhtml">

	<ui:define name="title">
		#{msg['title_registry_days']}
	</ui:define>

	<ui:define name="content">

		<p:spacer height="10" />

		<h:form id="form">

			<p:panel width="100%">
				<h:panelGrid id="pnlParameter" columns="2" width="100%">
					<h:outputText value="#{msg['day_calendar_week']}"
						style="width:100%" />
					<p:selectOneMenu value="#{kpiDailyBacking.kpiWeekSelected}"
						style="width:430px">
						<f:selectItems value="#{kpiDailyBacking.listCalendarWeeks}" />
						<p:ajax
							update="selDay weekState :editForm:display :editForm:cmdSave"
							listener="#{kpiDailyBacking.handleWeekChange}" />
					</p:selectOneMenu>

					<h:outputText value="#{msg['day_day']}" style="width:100%" />
					<p:selectOneMenu id="selDay"
						value="#{kpiDailyBacking.kpiDailySelected}" style="width:430px">
						<f:selectItems value="#{kpiDailyBacking.listDays}" />
						<p:ajax update=":editForm:display :editForm:cmdSave"
							listener="#{kpiDailyBacking.handleDayChange}" />
					</p:selectOneMenu>

					<h:outputLabel value="#{msg['day_week_state']}" />
					<h:outputText id="weekState"
						value="#{kpiDailyBacking.selectedWeek.state == 40?msg['wek_state_40']:msg['wek_state_60']}" />
				</h:panelGrid>
			</p:panel>

			<p:spacer height="10" />

		</h:form>
		<h:form id="editForm" prependId="false">
			<p:panel style="widht:100%" header="#{msg['msg_detail']}">

				<p:growl id="growl" showDetail="true" />

				<h:panelGrid id="display" columns="2" width="100%">

					<h:outputLabel value="#{msg['glb_state']}" />
					<h:outputText
						value="#{kpiDailyBacking.selected.state == 1?msg['glb_state_open']:msg['glb_state_close']}" />

					<h:outputLabel value="#{msg['day_wo_scheduled']}" />
					<p:spinner value="#{kpiDailyBacking.selected.scheduledOrders}"
						min="1" max="999" maxlength="3" disabled="true" />

					<h:outputLabel value="#{msg['day_wo_finished']}" />
					<p:spinner value="#{kpiDailyBacking.selected.finishedOrders}"
						min="0" max="999" maxlength="3"
						disabled="#{kpiDailyBacking.selected.state == 1?false:true}">
					</p:spinner>

					<h:outputLabel value="#{msg['day_wo_failures']}" />
					<p:spinner id="failuresOrders"
						value="#{kpiDailyBacking.selected.failuresOrders}" min="0"
						max="999" maxlength="3"
						disabled="#{kpiDailyBacking.selected.state == 1?false:true}" />

					<h:outputLabel value="#{msg['day_wo_indentified_work']}" />
					<p:spinner id="identifiedWork"
						value="#{kpiDailyBacking.selected.identifiedWork}" min="0"
						max="999" maxlength="3"
						disabled="#{kpiDailyBacking.selected.state == 1?false:true}" />

					<h:outputLabel value="#{msg['day_wo_founded_work']}" />
					<p:spinner id="foundWork"
						value="#{kpiDailyBacking.selected.foundWork}" min="0" max="999"
						maxlength="3"
						disabled="#{kpiDailyBacking.selected.state == 1?false:true}" />

				</h:panelGrid>

				<f:facet name="footer">
					<p:commandButton id="cmdSave"
						action="#{kpiDailyBacking.saveAction}" update="growl"
						icon="ui-icon-disk" value="#{msg['btn_save']}" process="@form"
						disabled="#{kpiDailyBacking.selected.state == 0?true:false || kpiDailyBacking.selected.id == null}">
						<f:setPropertyActionListener target="#{kpiDailyBacking.pageType}"
							value="registryDay" />
					</p:commandButton>
				</f:facet>

			</p:panel>

		</h:form>
	</ui:define>
</ui:composition>

</html>